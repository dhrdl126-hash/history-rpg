<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>히스토리 RPG 대시보드</title>
    <!-- 구글 폰트 불러오기 (초현대적이고 깔끔한 폰트) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- 배경 이펙트 요소 -->
    <div class="bg-shape circle-1"></div>
    <div class="bg-shape circle-2"></div>

    <div id="app">
        <!-- 1. 로그인 화면 -->
        <section id="login-screen" class="screen active">
            <div class="glass-card login-card">
                <div class="logo-icon">📜</div>
                <h1>History RPG</h1>
                <p class="subtitle">학생용 탐험 대시보드</p>

                <div class="input-group">
                    <label for="student-id">학번을 입력하여 로그인하세요 (예: 26jls1101)</label>
                    <input type="text" id="student-id" placeholder="아이디 입력" autocomplete="off" maxlength="15">
                    <label for="student-pwd" style="margin-top: 0.5rem;">비밀번호를 입력하세요</label>
                    <input type="password" id="student-pwd" placeholder="비밀번호 입력" autocomplete="off" maxlength="15">
                    <button id="login-btn" class="primary-btn glow-effect" style="margin-top: 0.5rem;">입장하기 ⚔️</button>
                    <button id="show-admin-login-btn" type="button" class="outline-btn sm-btn"
                        style="margin-top: 1rem; width: 100%;">👨‍🏫 첫 화면으로 (관리자 로그인)</button>
                </div>
                <p id="login-err" class="error-msg">올바른 학번 형식을 입력해주세요 (6자 이상).</p>
            </div>
        </section>

        <!-- 1-B. 교사(관리자) 화면 진입 로그인 화면 -->
        <section id="admin-login-screen" class="screen" style="max-width: 480px; margin: 0 auto; text-align: center;">
            <div class="glass-card login-card">
                <div class="logo-icon" style="font-size: 3rem; margin-bottom: 1rem;">🔐</div>
                <h2 style="margin-bottom: 0.5rem; color: #fff;">관리자 권한 인증</h2>
                <p class="subtitle" style="margin-bottom: 2rem;">선생님 비밀번호를 입력해주세요.</p>

                <div class="input-group">
                    <input type="password" id="admin-pwd-input" placeholder="비밀번호 입력" autocomplete="off">
                    <button id="admin-login-submit-btn" class="primary-btn glow-effect">인증하기</button>
                    <button id="admin-login-cancel-btn" class="outline-btn" style="margin-top: 0.5rem; width: 100%;">학생
                        화면으로</button>
                    <p id="admin-login-err" class="error-msg">비밀번호가 일치하지 않습니다.</p>
                </div>
            </div>
        </section>

        <!-- 2. 대시보드 화면 -->
        <section id="dashboard-screen" class="screen">
            <header class="dash-header glass-card">
                <div class="user-info">
                    <div class="avatar-sm">🛡️</div>
                    <div>
                        <h2><span id="display-id" class="highlight-text"></span> 님의 프로필</h2>
                        <div class="user-badges" style="margin-bottom: 0.8rem;">
                            <span class="badge level-badge clickable-badge" id="display-level" title="레벨/칭호 안내 보기">Lv.
                                1</span>
                            <span class="badge title-badge clickable-badge" id="display-title"
                                title="레벨/칭호 안내 보기">훈련병</span>
                            <span class="badge exp-badge">EXP <span id="display-exp">0</span></span>
                        </div>
                        <div class="profile-details">
                            <div class="profile-img-box" id="profile-img-box">
                                <span id="profile-img-placeholder">📸</span>
                            </div>
                            <div class="profile-text-box">
                                <p class="profile-bio" id="display-bio">역사를 탐구하는 탐험가입니다. 아직 생애나 업적이 기록되지 않았습니다.</p>
                                <button id="edit-profile-btn" type="button" class="sm-btn outline-btn"
                                    style="margin-top: 0.5rem; font-size: 0.8rem; position: relative; z-index: 20; pointer-events: auto;">✏️
                                    프로필 편집</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="display: flex; gap: 0.5rem; position: relative; z-index: 10;">
                    <button id="teacher-mode-btn" type="button" class="sm-btn outline-btn"
                        style="border-color: rgba(16, 185, 129, 0.4); color: #6ee7b7; pointer-events: auto;">교사
                        화면</button>
                    <button id="logout-btn" type="button" class="sm-btn outline-btn"
                        style="pointer-events: auto;">로그아웃</button>
                </div>
            </header>

            <div class="dashboard-grid">
                <!-- 능력치 시각화 카드 -->
                <div class="glass-card stats-card slide-in-left">
                    <div class="card-header">
                        <h3>📊 나의 능력치</h3>
                        <span class="badge power-badge">전투력(Power) <span id="display-power">0</span></span>
                    </div>

                    <div class="stats-container">
                        <div class="stat-group">
                            <div class="stat-label">
                                <span class="stat-name">💪 힘 (Strength)</span>
                                <span class="stat-val str-text" id="stat-str-val">0</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill str-fill" id="stat-str"></div>
                            </div>
                        </div>

                        <div class="stat-group">
                            <div class="stat-label">
                                <span class="stat-name">🧠 지력 (Intelligence)</span>
                                <span class="stat-val int-text" id="stat-int-val">0</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill int-fill" id="stat-int"></div>
                            </div>
                        </div>

                        <div class="stat-group">
                            <div class="stat-label">
                                <span class="stat-name">✨ 매력 (Charisma)</span>
                                <span class="stat-val cha-text" id="stat-cha-val">0</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill cha-fill" id="stat-cha"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 활동 기록 (텍스트 에어리어) -->
                <div class="glass-card activity-card slide-in-right">
                    <div class="card-header">
                        <h3>📜 탐험 일지 (활동 기록)</h3>
                    </div>
                    <p class="section-desc">오늘 수업 혹은 자습을 통해 얻은 역사적 지식과 깨달음을 기록하세요.</p>

                    <textarea id="activity-log" placeholder="오늘은 어떤 역사를 탐구했나요? (내용은 브라우저에 자동 저장됩니다)"></textarea>

                    <div class="action-row">
                        <span id="save-status"></span>
                        <button id="save-activity-btn" class="primary-btn sm-btn">기록 저장하기 💾</button>
                    </div>
                </div>
            </div>

            <!-- 네비게이션 액션 (갤러리 이동) -->
            <div class="nav-actions slide-in-up">
                <button id="view-gallery-btn" class="secondary-btn glow-effect">
                    👥 다른 학생(더미) 카드 갤러리 보기
                </button>
            </div>
        </section>

        <!-- 3. 더미 학생 갤러리 화면 -->
        <section id="gallery-screen" class="screen">
            <header class="dash-header glass-card push-down">
                <button id="back-to-dash-btn" class="sm-btn outline-btn">⬅ 대시보드로 복귀</button>
                <h2>동료 탐험가 갤러리</h2>
                <div style="width: 100px;"></div> <!-- 정렬용 여백 -->
            </header>

            <div class="gallery-grid" id="gallery-container">
                <!-- JS에서 더미 카드 6개가 여기에 주입됩니다 -->
            </div>
        </section>

        <!-- 4. 프로필 편집 모달 (오버레이) -->
        <div id="profile-edit-modal" class="modal-overlay" style="display: none;">
            <div class="glass-card modal-content slide-in-up">
                <h3>✏️ 프로필 편집</h3>
                <div class="input-group" style="margin-top: 1rem;">
                    <label>대표 이미지 등록 (권장: 정방형)</label>
                    <input type="file" id="profile-img-input" accept="image/*"
                        style="color: #fff; background: rgba(0,0,0,0.3); padding: 0.5rem; border-radius: 5px;">
                    <div id="profile-img-preview"
                        style="width: 100px; height: 100px; border-radius: 10px; background: rgba(255,255,255,0.1); margin: 0.5rem auto; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                        <span style="font-size: 2rem; color: #94a3b8;">📸</span>
                    </div>
                </div>
                <div class="input-group">
                    <label>상세 프로필 정보</label>
                    <div style="display: flex; gap: 0.5rem;">
                        <button id="open-life-modal-btn" class="secondary-btn glow-effect"
                            style="flex: 1; padding: 0.8rem; font-size: 0.9rem;">📝 생애 작성하기</button>
                        <button id="open-achievement-modal-btn" class="secondary-btn glow-effect"
                            style="flex: 1; padding: 0.8rem; font-size: 0.9rem;">🏆 주요 업적 작성하기</button>
                    </div>
                </div>
                <div style="display: flex; gap: 0.5rem; justify-content: flex-end; margin-top: 1rem;">
                    <button id="cancel-profile-btn" class="outline-btn sm-btn">취소</button>
                    <button id="save-profile-btn" class="primary-btn sm-btn">저장하기</button>
                </div>
            </div>
        </div>

        <!-- 서브 모달 1: 생애 작성 모달 -->
        <div id="sub-modal-life" class="modal-overlay" style="display: none; z-index: 1000;">
            <div class="glass-card modal-content slide-in-up" style="max-width: 400px; padding: 2rem;">
                <h3 style="margin-bottom: 1rem;">📝 생애 작성</h3>
                <textarea id="temp-life-input" placeholder="자신의 역사적 정체성이나 생애 흐름을 기록하세요."
                    style="min-height: 120px;"></textarea>
                <div style="display: flex; gap: 0.5rem; justify-content: flex-end; margin-top: 1rem;">
                    <button id="sub-cancel-life-btn" class="outline-btn sm-btn">취소</button>
                    <button id="sub-confirm-life-btn" class="primary-btn sm-btn">확인</button>
                </div>
            </div>
        </div>

        <!-- 서브 모달 2: 업적 작성 모달 -->
        <div id="sub-modal-achievement" class="modal-overlay" style="display: none; z-index: 1000;">
            <div class="glass-card modal-content slide-in-up" style="max-width: 400px; padding: 2rem;">
                <h3 style="margin-bottom: 1rem;">🏆 주요 업적 작성</h3>
                <textarea id="temp-achievement-input" placeholder="이루어낸 가장 큰 업적이나 자랑스러운 일을 기록하세요."
                    style="min-height: 120px;"></textarea>
                <div style="display: flex; gap: 0.5rem; justify-content: flex-end; margin-top: 1rem;">
                    <button id="sub-cancel-achievement-btn" class="outline-btn sm-btn">취소</button>
                    <button id="sub-confirm-achievement-btn" class="primary-btn sm-btn">확인</button>
                </div>
            </div>
        </div>

        <!-- 5. 교사 화면 진입 비밀번호 모달 (오버레이) -->
        <div id="teacher-pwd-modal" class="modal-overlay" style="display: none; z-index: 1000;">
            <div class="glass-card modal-content slide-in-up"
                style="max-width: 350px; padding: 2rem; text-align: center;">
                <h3 style="margin-bottom: 1rem;">👨‍🏫 교사 권한 확인</h3>
                <p style="font-size: 0.9rem; color: #94a3b8; margin-bottom: 1rem;">교사 비밀번호를 입력해주세요.</p>
                <input type="password" id="teacher-pwd-input" placeholder="****" autocomplete="off"
                    style="margin-bottom: 1rem; text-align: center;">
                <div style="display: flex; gap: 0.5rem; justify-content: center;">
                    <button id="teacher-pwd-cancel-btn" class="outline-btn sm-btn">취소</button>
                    <button id="teacher-pwd-submit-btn" class="primary-btn sm-btn">확인</button>
                </div>
                <p id="teacher-pwd-err" class="error-msg" style="margin-top: 0.5rem;">비밀번호가 일치하지 않습니다.</p>
            </div>
        </div>
        <!-- 6. 레벨/칭호 안내 가이드 모달 (오버레이) -->
        <div id="level-guide-modal" class="modal-overlay" style="display: none; z-index: 1000;">
            <div class="glass-card modal-content slide-in-up" style="max-width: 450px; padding: 2rem;">
                <h3 style="margin-bottom: 1.5rem; text-align: center;">🌟 레벨 및 칭호 안내</h3>

                <div style="display: flex; flex-direction: column; gap: 1rem; margin-bottom: 2rem;">
                    <!-- 각 등급표 안내 -->
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem;">
                        <span style="font-weight: 700; color: #fcd34d;">Lv. 1 <span
                                style="color: #6ee7b7; margin-left: 0.5rem;">훈련병</span></span>
                        <span style="color: #94a3b8; font-size: 0.9rem;">기본 부여 (0 EXP)</span>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem;">
                        <span style="font-weight: 700; color: #fcd34d;">Lv. 2 <span
                                style="color: #6ee7b7; margin-left: 0.5rem;">탐험가</span></span>
                        <span style="color: #94a3b8; font-size: 0.9rem;">20 EXP 필요</span>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem;">
                        <span style="font-weight: 700; color: #fcd34d;">Lv. 3 <span
                                style="color: #6ee7b7; margin-left: 0.5rem;">전략가</span></span>
                        <span style="color: #94a3b8; font-size: 0.9rem;">50 EXP 필요</span>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem;">
                        <span style="font-weight: 700; color: #fcd34d;">Lv. 4 <span
                                style="color: #6ee7b7; margin-left: 0.5rem;">사관</span></span>
                        <span style="color: #94a3b8; font-size: 0.9rem;">90 EXP 필요</span>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem;">
                        <span style="font-weight: 700; color: #fcd34d;">Lv. 5 <span
                                style="color: #6ee7b7; margin-left: 0.5rem;">영웅</span></span>
                        <span style="color: #94a3b8; font-size: 0.9rem;">140 EXP 필요</span>
                    </div>
                </div>

                <div style="display: flex; justify-content: center;">
                    <button id="close-level-guide-btn" class="primary-btn sm-btn" style="width: 100%;">확인했습니다</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 로직 스크립트 연결 -->
    <script src="app.js"></script>
</body>

</html>